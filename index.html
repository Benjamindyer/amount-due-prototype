<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Powered Now - Invoice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            padding: 0;
            background: #f5f5f5;
            color: #000;
        }

        /* Control Panel - Dev Tool */
        .control-panel {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            max-width: 100%;
            background: #2c3e50;
            padding: 15px 20px;
            padding-bottom: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border-radius: 0 0 8px 8px;
            transition: transform 0.3s ease;
        }

        .control-panel.collapsed {
            transform: translateY(calc(-100% + 50px));
        }

        .control-panel-toggle {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: #ecf0f1;
            border: none;
            border-radius: 0 0 8px 8px;
            padding: 8px 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1001;
            margin: 0;
        }

        .control-panel-toggle:hover {
            background: #34495e;
        }

        .control-panel-content {
            transition: opacity 0.3s ease, max-height 0.3s ease;
            overflow: hidden;
        }

        .control-panel.collapsed .control-panel-content {
            opacity: 0;
            max-height: 0;
            pointer-events: none;
        }

        .control-panel-wrapper {
            max-width: 900px;
            margin: 0 auto;
        }

        .control-panel h2 {
            color: #ecf0f1;
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .control-panel p {
            color: #bdc3c7;
            font-size: 12px;
            margin-bottom: 15px;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #34495e;
            padding: 10px;
            border-radius: 4px;
        }

        .control-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #3498db;
        }

        .control-item label {
            color: #ecf0f1;
            font-size: 13px;
            cursor: pointer;
            user-select: none;
        }

        .design-selector {
            margin-bottom: 20px;
            padding: 15px;
            background: #34495e;
            border-radius: 4px;
        }

        .design-selector label {
            color: #ecf0f1;
            font-size: 14px;
            font-weight: 500;
            margin-right: 15px;
            display: inline-block;
        }

        .design-selector select {
            background: #2c3e50;
            color: #ecf0f1;
            border: 1px solid #4a5f7f;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 13px;
            cursor: pointer;
            min-width: 150px;
        }

        .design-selector select:focus {
            outline: none;
            border-color: #3498db;
        }

        .view-source-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .view-source-btn:hover {
            background: #2980b9;
        }

        .color-config {
            margin-top: 15px;
            padding: 15px;
            background: #34495e;
            border-radius: 4px;
        }

        .color-config h4 {
            color: #ecf0f1;
            font-size: 13px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .color-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .color-input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .color-input-group label {
            color: #bdc3c7;
            font-size: 11px;
            font-weight: 500;
        }

        .color-input-wrapper {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .color-input-wrapper input[type="color"] {
            width: 50px;
            height: 35px;
            border: 2px solid #4a5f7f;
            border-radius: 4px;
            cursor: pointer;
            background: none;
        }

        .color-input-wrapper input[type="text"] {
            flex: 1;
            padding: 8px;
            background: #2c3e50;
            border: 1px solid #4a5f7f;
            border-radius: 4px;
            color: #ecf0f1;
            font-size: 12px;
            font-family: monospace;
        }

        .color-input-wrapper input[type="text"]:focus {
            outline: none;
            border-color: #3498db;
        }

        .source-code-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 999;
            background: #2d2d2d;
            padding: 20px;
            overflow-y: auto;
            box-shadow: none;
        }

        .source-code-panel.active {
            display: block;
        }

        .source-code-panel .control-panel-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .source-code-panel h3 {
            color: #ecf0f1;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .source-code-panel .close-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .source-code-panel .close-btn:hover {
            background: #c0392b;
        }

        .source-code-panel pre {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 0;
            flex: 1;
            min-height: 0;
        }

        .source-code-panel code {
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
        }

        .source-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .source-tab {
            padding: 8px 16px;
            background: #3d3d3d;
            color: #bdc3c7;
            border: none;
            border-radius: 4px 4px 0 0;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
        }

        .source-tab.active {
            background: #1e1e1e;
            color: #ecf0f1;
        }

        .invoice-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 180px;
            transition: margin-top 0.3s ease;
        }

        .control-panel.collapsed ~ .invoice-container {
            margin-top: 90px;
        }

        .invoice-container.has-source-panel {
            margin-top: 280px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 24px;
        }

        .company-name {
            font-size: 28px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .invoice-info {
            text-align: right;
            font-size: 14px;
            line-height: 1.6;
        }

        hr {
            border: none;
            border-top: 1px solid #ddd;
            margin: 20px 0;
        }

        /* Details Section */
        .details-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .details-column h3 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .details-column p {
            font-size: 13px;
            line-height: 1.6;
        }

        /* Scope of Services */
        .scope-section {
            margin-bottom: 30px;
        }

        .scope-section h3 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .scope-section ul {
            list-style: disc;
            margin-left: 20px;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .scope-section p {
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .quote-reference {
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            margin: 20px 0;
        }

        /* Table */
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .invoice-table thead {
            background: #555;
            color: white;
        }

        .invoice-table th {
            padding: 12px;
            text-align: left;
            font-size: 13px;
            font-weight: bold;
        }

        .invoice-table tbody tr:nth-child(even) {
            background: #f9f9f9;
        }

        .invoice-table tbody tr:nth-child(odd) {
            background: white;
        }

        .invoice-table td {
            padding: 12px;
            font-size: 13px;
        }

        .table-summary {
            text-align: right;
            margin-top: 10px;
            font-size: 13px;
        }

        .table-summary p {
            margin: 5px 0;
        }

        /* Amount Due Box */
        .amount-due-heading {
            margin-top: 40px;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .amount-due-section {
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
        }

        .amount-due-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: start;
        }

        .amount-due-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .amount-due-item {
            padding: 8px;
            background: white;
            border-radius: 3px;
            border: 1px solid #e0e0e0;
            transition: opacity 0.2s, display 0.2s;
        }

        .amount-due-item.hidden {
            display: none !important;
        }

        .amount-due-box.hidden {
            display: none !important;
        }

        .amount-due-item-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 3px;
            font-weight: 500;
        }

        .amount-due-item-value {
            font-size: 13px;
            font-weight: 600;
            color: #000;
        }

        .amount-due-box {
            background: #dc3545;
            color: white;
            padding: 12px;
            border-radius: 4px;
            min-width: 160px;
            text-align: center;
            box-shadow: none;
        }

        .amount-due-box.hidden {
            display: none;
        }

        .amount-due-box .due-label {
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .amount-due-box .due-date {
            font-size: 11px;
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .amount-due-box .due-amount {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 6px;
        }

        .amount-due-box .due-date-info {
            font-size: 10px;
            opacity: 0.8;
        }

        .amount-due-footer {
            margin-top: 12px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
            font-size: 11px;
            color: #666;
            line-height: 1.5;
        }

        /* Design 1 - Card Grid with Grouped Sections */
        .amount-due-section.design-1 .amount-due-content {
            display: block;
        }

        .amount-due-section.design-1 .amount-due-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .amount-due-section.design-1 .amount-due-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .amount-due-section.design-1 .amount-due-group:first-child {
            padding-bottom: 15px;
        }

        .amount-due-section.design-1 .amount-due-group.has-border {
            border-top: 2px solid #d0d0d0;
            padding-top: 15px;
            margin-top: 0;
        }

        .amount-due-section.design-1 .amount-due-group:last-child {
            padding-top: 0;
            grid-template-columns: repeat(2, 1fr);
        }

        .amount-due-section.design-1 .amount-due-box {
            align-self: stretch;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 8px;
            min-height: 100%;
            height: 100%;
        }

        .amount-due-section.design-1 .amount-due-box .due-amount-line {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 4px;
            line-height: 1.3;
            color: white;
        }

        .amount-due-section.design-1 .amount-due-box .due-date-info {
            font-size: 9px;
            line-height: 1.3;
            color: white;
            opacity: 0.9;
        }
        
        /* Design 2 - Simple Table Layout */
        .amount-due-section.design-2 {
            padding: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .amount-due-section.design-2 .amount-due-content {
            display: block;
            padding: 12px;
        }

        .amount-due-section.design-2 .amount-due-grid {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .amount-due-section.design-2 .amount-due-group {
            display: flex;
            flex-direction: column;
        }

        .amount-due-section.design-2 .amount-due-group:first-child {
            padding-bottom: 10px;
            margin-bottom: 0;
        }

        .amount-due-section.design-2 .amount-due-group.has-border {
            border-top: 2px solid #d0d0d0;
            padding-top: 10px;
            margin-top: 0;
        }

        .amount-due-section.design-2 .amount-due-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            background: white;
            border: none;
            border-bottom: 1px solid #f0f0f0;
            border-radius: 0;
            margin: 0;
        }

        .amount-due-section.design-2 .amount-due-item.hidden {
            display: none !important;
        }

        .amount-due-section.design-2 .amount-due-box.hidden {
            display: none !important;
        }

        .amount-due-section.design-2 .amount-due-group .amount-due-item:last-child {
            border-bottom: none;
        }

        .amount-due-section.design-2 .amount-due-group:last-child .amount-due-item:last-child {
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        .amount-due-section.design-2 .amount-due-item-label {
            font-size: 13px;
            color: #333;
            margin-bottom: 0;
            font-weight: 400;
        }

        .amount-due-section.design-2 .amount-due-item-value {
            font-size: 14px;
            font-weight: 600;
            color: #000;
        }

        .amount-due-section.design-2 .amount-due-box {
            margin: 0;
            width: 100%;
            padding: 8px 12px;
            background: white;
            border: 2px dashed #dc3545;
            border-radius: 4px;
            box-shadow: none;
        }

        .amount-due-section.design-2 .amount-due-box .due-amount-line {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
            line-height: 1.3;
            color: #dc3545;
        }

        .amount-due-section.design-2 .amount-due-box .due-date-info {
            font-size: 10px;
            line-height: 1.3;
            color: #dc3545;
            opacity: 0.9;
        }

        .amount-due-section.design-2 .amount-due-footer {
            margin: 12px;
            padding-top: 0;
            border-top: none;
            font-size: 11px;
        }

        /* Design 6 - Minimal Compact */
        .amount-due-section.design-6 {
            padding: 10px;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }

        .amount-due-section.design-6 .amount-due-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            align-items: end;
        }

        .amount-due-section.design-6 .amount-due-grid {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .amount-due-section.design-6 .amount-due-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }

        .amount-due-section.design-6 .amount-due-group:first-child {
            padding-bottom: 8px;
        }

        .amount-due-section.design-6 .amount-due-group.has-border {
            border-top: 1px solid #e0e0e0;
            padding-top: 8px;
            margin-top: 0;
        }

        .amount-due-section.design-6 .amount-due-item {
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 2px;
            border: 1px solid #e8e8e8;
        }

        .amount-due-section.design-6 .amount-due-item-label {
            font-size: 10px;
            color: #666;
            margin-bottom: 2px;
            font-weight: 500;
        }

        .amount-due-section.design-6 .amount-due-item-value {
            font-size: 12px;
            font-weight: 600;
            color: #000;
        }

        .amount-due-section.design-6 .amount-due-box {
            margin: 0;
            padding: 8px 12px;
            min-width: 140px;
        }

        .amount-due-section.design-6 .amount-due-box .due-label {
            font-size: 9px;
            margin-bottom: 3px;
        }

        .amount-due-section.design-6 .amount-due-box .due-date {
            font-size: 9px;
            margin-bottom: 4px;
        }

        .amount-due-section.design-6 .amount-due-box .due-amount {
            font-size: 18px;
            margin-bottom: 3px;
        }

        .amount-due-section.design-6 .amount-due-box .due-date-info {
            font-size: 8px;
        }

        .amount-due-section.design-6 .amount-due-footer {
            margin: 0;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e8e8e8;
            font-size: 10px;
            line-height: 1.4;
        }

        /* Design 7 - Ultra Compact Single Line */
        .amount-due-section.design-7 {
            padding: 8px;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }

        .amount-due-section.design-7 .amount-due-content {
            display: block;
        }

        .amount-due-section.design-7 .amount-due-grid {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .amount-due-section.design-7 .amount-due-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .amount-due-section.design-7 .amount-due-group:first-child {
            padding-bottom: 6px;
        }

        .amount-due-section.design-7 .amount-due-group.has-border {
            border-top: 1px solid #e0e0e0;
            padding-top: 6px;
            margin-top: 0;
        }

        .amount-due-section.design-7 .amount-due-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 6px;
            background: #f8f9fa;
            border-radius: 2px;
            border: 1px solid #e8e8e8;
            min-height: 20px;
        }

        .amount-due-section.design-7 .amount-due-item.hidden {
            display: none !important;
        }

        .amount-due-section.design-7 .amount-due-box.hidden {
            display: none !important;
        }

        .amount-due-section.design-7 .amount-due-item-label {
            font-size: 10px;
            color: #666;
            margin-bottom: 0;
            font-weight: 500;
            display: inline;
        }

        .amount-due-section.design-7 .amount-due-item-value {
            font-size: 11px;
            font-weight: 600;
            color: #000;
            display: inline;
            margin-left: 8px;
        }

        .amount-due-section.design-7 .amount-due-box {
            margin: 0;
            margin-top: 6px;
            padding: 6px 8px;
            min-width: 100%;
        }

        .amount-due-section.design-7 .amount-due-box .due-amount-line {
            font-size: 11px;
            font-weight: 700;
            margin-bottom: 2px;
            line-height: 1.2;
            color: white;
        }

        .amount-due-section.design-7 .amount-due-box .due-date-info {
            font-size: 8px;
            line-height: 1.2;
            color: white;
            opacity: 0.9;
        }

        .amount-due-section.design-7 .amount-due-footer {
            margin: 0;
            margin-top: 6px;
            padding-top: 6px;
            border-top: 1px solid #e8e8e8;
            font-size: 9px;
            line-height: 1.3;
        }

        /* Bank Details */
        .bank-section {
            margin-top: 40px;
        }

        .bank-section h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .bank-section p {
            font-size: 13px;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .bank-section ul {
            list-style: disc;
            margin-left: 20px;
            font-size: 13px;
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <!-- Control Panel - Dev Tool -->
    <div class="control-panel" id="control-panel">
        <button class="control-panel-toggle" onclick="toggleControlPanel()">Show/Hide Configuration</button>
        <div class="control-panel-content">
        <div class="control-panel-wrapper">
            <h2>Amount Due Box Configuration</h2>
            <div class="design-selector">
                <label for="design-select">Design:</label>
                <select id="design-select">
                    <option value="design-1">Design 1 - Card Grid</option>
                    <option value="design-2">Design 2 - Simple List</option>
                    <option value="design-6">Design 6 - Minimal Compact</option>
                    <option value="design-7">Design 7 - Ultra Compact</option>
                </select>
            </div>
            <p>Toggle items to show different configurations for the dev team:</p>
            <div class="control-grid">
            <div class="control-item">
                <input type="checkbox" id="toggle-source-quote" checked data-item="source-quote">
                <label for="toggle-source-quote">Source Quote</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-this-invoice" checked data-item="this-invoice">
                <label for="toggle-this-invoice">This invoice</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-invoice-less-credits" checked data-item="invoice-less-credits">
                <label for="toggle-invoice-less-credits">Invoice less credits</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-already-invoiced" checked data-item="already-invoiced">
                <label for="toggle-already-invoiced">Already invoiced</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-remaining" checked data-item="remaining">
                <label for="toggle-remaining">Remaining</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-payments-less-refunds" checked data-item="payments-less-refunds">
                <label for="toggle-payments-less-refunds">Payments less refunds</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-estimated-cis" checked data-item="estimated-cis">
                <label for="toggle-estimated-cis">Estimated CIS</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="toggle-due-box" checked data-item="due-box">
                <label for="toggle-due-box">Due Box</label>
            </div>
        </div>
        <div class="color-config">
            <h4>Due Box Colors</h4>
            <div class="color-inputs">
                <div class="color-input-group">
                    <label>Background Color</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="due-box-bg-color" value="#dc3545">
                        <input type="text" id="due-box-bg-color-text" value="#dc3545">
                    </div>
                </div>
                <div class="color-input-group">
                    <label>Text Color</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="due-box-text-color" value="#ffffff">
                        <input type="text" id="due-box-text-color-text" value="#ffffff">
                    </div>
                </div>
            </div>
        </div>
        <button class="view-source-btn" onclick="toggleSourceCode()">View Source Code</button>
        </div>
        </div>
        <div class="source-code-panel" id="source-code-panel">
            <div class="control-panel-wrapper">
                <h3>Source Code for Current Design <button class="close-btn" onclick="toggleSourceCode()">Close</button></h3>
                <div class="source-tabs">
                    <button class="source-tab active" onclick="showSourceTab('html')">HTML</button>
                    <button class="source-tab" onclick="showSourceTab('css')">CSS</button>
                </div>
                <div id="html-source" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                    <pre style="flex: 1; overflow-y: auto;"><code id="html-code"></code></pre>
                </div>
                <div id="css-source" style="display: none; flex: 1; flex-direction: column; min-height: 0;">
                    <pre style="flex: 1; overflow-y: auto;"><code id="css-code"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <div class="invoice-container">
        <!-- Header -->
        <div class="header">
            <div class="logo-section">
                <div class="logo">P</div>
                <div class="company-name">POWERED NOW</div>
            </div>
            <div class="invoice-info">
                <div>INVOICE DATE: 07/01/2026</div>
                <div>INVOICE NUMBER: INV000052</div>
            </div>
        </div>

        <hr>

        <!-- Details Section -->
        <div class="details-section">
            <div class="details-column">
                <h3>Customer Details</h3>
                <p>
                    Behr International<br>
                    1 Royal Architects Road<br>
                    EAST COWES<br>
                    Isle Of Wight<br>
                    PO32 6FL
                </p>
            </div>
            <div class="details-column">
                <h3>Business Details</h3>
                <p>
                    Powered Now Ltd<br>
                    Powered Now<br>
                    Mill Court<br>
                    Newport<br>
                    Isle Of Wight<br>
                    PO30 2AA<br>
                    VAT: 111111111
                </p>
            </div>
        </div>

        <hr>

        <!-- Scope of Services -->
        <div class="scope-section">
            <h3>Scope of Services</h3>
            <ul>
                <li>Building and Construction Services</li>
                <li>Renovation and Remodeling</li>
                <li>Project Management</li>
                <li>Custom Home Building</li>
            </ul>
            <p>We offer a range of professional building and construction services to meet your specific needs. Whether you are looking to build a new home from the ground up, renovate an existing space, or require expert project management, our team is equipped to deliver excellence at every stage of the process.</p>
            <div class="quote-reference">Based on: QTE000013</div>
        </div>

        <!-- Table -->
        <table class="invoice-table">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>VAT Rate</th>
                    <th>VAT Amount</th>
                    <th>Est CIS</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>material 1</td>
                    <td>£83.33</td>
                    <td>20%</td>
                    <td>£16.67</td>
                    <td>Outside CIS</td>
                </tr>
                <tr>
                    <td>labour 1</td>
                    <td>£100.00</td>
                    <td>20%</td>
                    <td>£20.00</td>
                    <td>£20.00</td>
                </tr>
                <tr>
                    <td>drc 1</td>
                    <td>£100.00</td>
                    <td>0%</td>
                    <td>£0.00</td>
                    <td>£20.00</td>
                </tr>
                <tr>
                    <td>drc 5</td>
                    <td>£100.00</td>
                    <td>0%</td>
                    <td>£0.00</td>
                    <td>£20.00</td>
                </tr>
            </tbody>
        </table>

        <div class="table-summary">
            <p>Amount: £383.33</p>
            <p>VAT: subject to DRC</p>
            <p><strong>Amount: £420.00</strong></p>
        </div>

        <!-- Amount Due Box -->
        <h3 class="amount-due-heading">Domestic Reverse Charge: Customer to account for VAT to HMRC</h3>
        <div class="amount-due-section design-1">
            <div class="amount-due-content">
                <div class="amount-due-grid">
                    <div class="amount-due-group">
                        <div class="amount-due-item" data-item-id="source-quote">
                            <div class="amount-due-item-label">Source Quote</div>
                            <div class="amount-due-item-value">£420.00</div>
                        </div>
                        <div class="amount-due-item" data-item-id="this-invoice">
                            <div class="amount-due-item-label">This invoice</div>
                            <div class="amount-due-item-value">£420.00</div>
                        </div>
                        <div class="amount-due-item" data-item-id="already-invoiced">
                            <div class="amount-due-item-label">Already invoiced</div>
                            <div class="amount-due-item-value">£420.00</div>
                        </div>
                        <div class="amount-due-item" data-item-id="remaining">
                            <div class="amount-due-item-label">Remaining</div>
                            <div class="amount-due-item-value">-£420.00</div>
                        </div>
                    </div>
                    <div class="amount-due-group">
                        <div class="amount-due-item" data-item-id="invoice-less-credits">
                            <div class="amount-due-item-label">Invoice less credits</div>
                            <div class="amount-due-item-value">£400.00</div>
                        </div>
                        <div class="amount-due-item" data-item-id="payments-less-refunds">
                            <div class="amount-due-item-label">Payments less refunds</div>
                            <div class="amount-due-item-value">£65.00</div>
                        </div>
                        <div class="amount-due-item" data-item-id="estimated-cis">
                            <div class="amount-due-item-label">Estimated CIS</div>
                            <div class="amount-due-item-value">£60.00</div>
                        </div>
                        <div class="amount-due-box" data-item-id="due-box">
                            <div class="due-amount-line">£335.00 due on 14/01/2026</div>
                            <div class="due-date-info">Invoice correct as of 07/01/2026</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="amount-due-footer">
                UTR: 1111111111, Company Number: N/A, Registered Address: Mill Court, Powered Now, Newport, Isle Of Wight, PO30 2AA, UNITED KINGDOM
            </div>
        </div>

        <!-- Bank Details -->
        <div class="bank-section">
            <h3>Bank Details</h3>
            <p>Please find our bank details below for your payment convenience:</p>
            <ul>
                <li>Account Name: Powered Now Ltd</li>
                <li>Bank: [Bank Name]</li>
                <li>Account Number: [Account Number]</li>
                <li>Sort Code: [Sort Code]</li>
            </ul>
            <p>Ensure to use your invoice number as the payment reference to facilitate accurate processing.</p>
        </div>
    </div>

    <script>
        // Default colors for each design
        const defaultColors = {
            'design-1': { bg: '#dc3545', text: '#ffffff' },
            'design-2': { bg: '#ffffff', text: '#dc3545' },
            'design-6': { bg: '#dc3545', text: '#ffffff' },
            'design-7': { bg: '#dc3545', text: '#ffffff' }
        };

        // Control Panel Toggle Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('.control-panel input[type="checkbox"]');
            const designSelect = document.getElementById('design-select');
            const amountDueSection = document.querySelector('.amount-due-section');
            const bgColorInput = document.getElementById('due-box-bg-color');
            const bgColorText = document.getElementById('due-box-bg-color-text');
            const textColorInput = document.getElementById('due-box-text-color');
            const textColorText = document.getElementById('due-box-text-color-text');
            
            // Load colors from localStorage or use defaults
            function loadColors() {
                const currentDesign = amountDueSection.classList.contains('design-1') ? 'design-1' :
                                     amountDueSection.classList.contains('design-2') ? 'design-2' :
                                     amountDueSection.classList.contains('design-6') ? 'design-6' : 'design-7';
                
                const storedBg = localStorage.getItem('dueBoxBgColor');
                const storedText = localStorage.getItem('dueBoxTextColor');
                
                const bgColor = storedBg || defaultColors[currentDesign].bg;
                const textColor = storedText || defaultColors[currentDesign].text;
                
                bgColorInput.value = bgColor;
                bgColorText.value = bgColor;
                textColorInput.value = textColor;
                textColorText.value = textColor;
                
                applyColors();
            }
            
            // Apply colors to due box
            function applyColors() {
                const dueBox = document.querySelector('.amount-due-box');
                if (dueBox) {
                    const bgColor = bgColorInput.value;
                    const textColor = textColorInput.value;
                    
                    // Apply background color with !important
                    dueBox.style.setProperty('background-color', bgColor, 'important');
                    dueBox.style.setProperty('color', textColor, 'important');
                    
                    // Apply to all text elements inside with !important
                    dueBox.querySelectorAll('.due-amount-line, .due-date-info, .due-label, .due-date, .due-amount').forEach(el => {
                        el.style.setProperty('color', textColor, 'important');
                    });
                    
                    // For Design 2, handle border color
                    if (amountDueSection.classList.contains('design-2')) {
                        dueBox.style.setProperty('border-color', textColor, 'important');
                    } else {
                        // For other designs, ensure background is set
                        dueBox.style.setProperty('background-color', bgColor, 'important');
                    }
                    
                    // Save to localStorage
                    localStorage.setItem('dueBoxBgColor', bgColor);
                    localStorage.setItem('dueBoxTextColor', textColor);
                }
            }
            
            // Color input handlers
            bgColorInput.addEventListener('input', function() {
                bgColorText.value = this.value;
                applyColors();
            });
            
            bgColorText.addEventListener('input', function() {
                if (/^#[0-9A-F]{6}$/i.test(this.value)) {
                    bgColorInput.value = this.value;
                    applyColors();
                }
            });
            
            textColorInput.addEventListener('input', function() {
                textColorText.value = this.value;
                applyColors();
            });
            
            textColorText.addEventListener('input', function() {
                if (/^#[0-9A-F]{6}$/i.test(this.value)) {
                    textColorInput.value = this.value;
                    applyColors();
                }
            });
            
            // Design switcher
            designSelect.addEventListener('change', function() {
                const selectedDesign = this.value;
                // Remove all design classes
                amountDueSection.classList.remove('design-1', 'design-2', 'design-6', 'design-7');
                // Add selected design class
                amountDueSection.classList.add(selectedDesign);
                
                // Load colors for new design (use stored or default)
                loadColors();
                
                // Update source code if panel is open
                if (document.getElementById('source-code-panel').classList.contains('active')) {
                    updateSourceCode();
                }
            });
            
            // Update border visibility based on visible items
            function updateSectionBorders() {
                const firstGroup = amountDueSection.querySelector('.amount-due-group:first-child');
                const secondGroup = amountDueSection.querySelector('.amount-due-group:last-child');
                
                if (firstGroup && secondGroup) {
                    const firstGroupVisible = firstGroup.querySelectorAll('.amount-due-item:not(.hidden), .amount-due-box:not(.hidden)').length > 0;
                    const secondGroupVisible = secondGroup.querySelectorAll('.amount-due-item:not(.hidden), .amount-due-box:not(.hidden)').length > 0;
                    
                    if (firstGroupVisible && secondGroupVisible) {
                        secondGroup.classList.add('has-border');
                    } else {
                        secondGroup.classList.remove('has-border');
                    }
                }
            }
            
            // Item visibility toggles
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const itemId = this.getAttribute('data-item');
                    const item = document.querySelector(`[data-item-id="${itemId}"]`);
                    
                    if (item) {
                        if (this.checked) {
                            item.classList.remove('hidden');
                        } else {
                            item.classList.add('hidden');
                        }
                    }
                    
                    // Update section borders
                    updateSectionBorders();
                    
                    // Update source code if panel is open
                    if (document.getElementById('source-code-panel').classList.contains('active')) {
                        updateSourceCode();
                    }
                });
            });
            
            // Update borders on design change
            designSelect.addEventListener('change', function() {
                setTimeout(updateSectionBorders, 0);
            });
            
            // Initial border update
            updateSectionBorders();
            
            // Load colors on page load
            loadColors();
            
            // Load control panel state
            const isCollapsed = localStorage.getItem('controlPanelCollapsed') === 'true';
            if (isCollapsed) {
                document.getElementById('control-panel').classList.add('collapsed');
            }
        });

        function toggleControlPanel() {
            const panel = document.getElementById('control-panel');
            panel.classList.toggle('collapsed');
            const isCollapsed = panel.classList.contains('collapsed');
            localStorage.setItem('controlPanelCollapsed', isCollapsed);
        }

        function toggleSourceCode() {
            const panel = document.getElementById('source-code-panel');
            const invoiceContainer = document.querySelector('.invoice-container');
            panel.classList.toggle('active');
            if (panel.classList.contains('active')) {
                invoiceContainer.classList.add('has-source-panel');
                updateSourceCode();
            } else {
                invoiceContainer.classList.remove('has-source-panel');
            }
        }

        function showSourceTab(tab) {
            document.querySelectorAll('.source-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('html-source').style.display = tab === 'html' ? 'block' : 'none';
            document.getElementById('css-source').style.display = tab === 'css' ? 'block' : 'none';
            event.target.classList.add('active');
        }

        function updateSourceCode() {
            const amountDueSection = document.querySelector('.amount-due-section');
            const currentDesign = Array.from(amountDueSection.classList).find(c => c.startsWith('design-'));
            
            // Get HTML (clone to avoid modifying original)
            const sectionClone = amountDueSection.cloneNode(true);
            // Remove hidden items from clone
            sectionClone.querySelectorAll('.hidden').forEach(el => el.remove());
            const htmlContent = sectionClone.outerHTML;
            
            // Get CSS for current design
            const styleSheet = Array.from(document.styleSheets).find(sheet => {
                try {
                    return sheet.href && sheet.href.includes('invoice.html') || sheet.ownerNode && sheet.ownerNode.tagName === 'STYLE';
                } catch(e) {
                    return false;
                }
            });
            
            let cssContent = '';
            if (currentDesign) {
                // Extract CSS rules for current design
                const allStyles = document.querySelector('style').textContent;
                const designRegex = new RegExp(`/\\*\\s*${currentDesign.replace('design-', 'Design ')}[^]*?\\*/[^]*?(?=/\\*|$)`, 'g');
                const matches = allStyles.match(designRegex);
                if (matches) {
                    cssContent = matches[0];
                } else {
                    // Fallback: get all rules containing the design class
                    const lines = allStyles.split('\n');
                    let inDesignBlock = false;
                    let designCss = '';
                    lines.forEach(line => {
                        if (line.includes(currentDesign)) {
                            inDesignBlock = true;
                        }
                        if (inDesignBlock) {
                            designCss += line + '\n';
                            if (line.trim() === '}' && !line.includes(currentDesign)) {
                                // Check if we're ending a nested block or the design block
                                const openBraces = (designCss.match(/{/g) || []).length;
                                const closeBraces = (designCss.match(/}/g) || []).length;
                                if (closeBraces >= openBraces && !line.includes('/*')) {
                                    inDesignBlock = false;
                                }
                            }
                        }
                    });
                    cssContent = designCss;
                }
            }
            
            // Format and display
            document.getElementById('html-code').textContent = formatHTML(htmlContent);
            document.getElementById('css-code').textContent = cssContent || '/* CSS for ' + currentDesign + ' */\n' + getDesignCSS(currentDesign);
        }

        function formatHTML(html) {
            // Simple HTML formatting
            let formatted = '';
            let indent = 0;
            const tab = '  ';
            html.split(/>\s*</).forEach(node => {
                if (node.match(/^\/\w/)) indent--;
                formatted += tab.repeat(indent > 0 ? indent : 0) + '<' + node + '>\n';
                if (node.match(/^<?\w[^>]*[^\/]$/) && !node.startsWith('input') && !node.startsWith('br')) indent++;
            });
            return formatted.substring(1, formatted.length - 2);
        }

        function getDesignCSS(design) {
            // Get CSS from style tag
            const styleTag = document.querySelector('style');
            const cssText = styleTag.textContent;
            const designName = design.replace('design-', 'Design ');
            
            // Find the design block
            const startMarker = `/* ${designName}`;
            const startIndex = cssText.indexOf(startMarker);
            if (startIndex === -1) return '';
            
            // Find the next design or end
            const nextDesignIndex = cssText.indexOf('/* Design ', startIndex + 1);
            const endIndex = nextDesignIndex !== -1 ? nextDesignIndex : cssText.length;
            
            return cssText.substring(startIndex, endIndex).trim();
        }
    </script>
</body>
</html>
